
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This is documentation">
      
      
        <meta name="author" content="Steve Sharman">
      
      
        <link rel="canonical" href="https://spsharman.com/categories/aci/access-policies/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../tenant-design-options/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Access Policies - spsharman</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#access-policy-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="spsharman" class="md-header__button md-logo" aria-label="spsharman" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            spsharman
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Access Policies
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  ACI

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../networking/route-leaking/" class="md-tabs__link">
          
  
  Networking

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../random-stuff/html-colour-codes/" class="md-tabs__link">
          
  
  Random stuff

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="spsharman" class="md-nav__button md-logo" aria-label="spsharman" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    spsharman
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ACI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ACI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Access Policies
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Access Policies
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#access-policy-building-blocks" class="md-nav__link">
    <span class="md-ellipsis">
      Access Policy Building Blocks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-build-this-out-step-by-step" class="md-nav__link">
    <span class="md-ellipsis">
      Let's build this out step by step...!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-start-again-at-the-bottom-and-work-our-way-up-the-object-model" class="md-nav__link">
    <span class="md-ellipsis">
      Let's start (again) at the bottom and work our way up the Object Model...!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#now-lets-start-at-the-top-and-work-our-way-down-the-object-model" class="md-nav__link">
    <span class="md-ellipsis">
      Now let's start at the top and work our way down the Object Model...!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-complete-the-object-model" class="md-nav__link">
    <span class="md-ellipsis">
      Let's complete the Object Model...!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#that-seems-like-a-lot-of-steps-to-configure-an-interface" class="md-nav__link">
    <span class="md-ellipsis">
      That seems like a lot of steps to configure an interface...!
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tenant-design-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Designing your tenants
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../route-leaking-epgs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route Leaking with EPGs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../route-leaking-esgs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route Leaking with ESGs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common-tenant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with tenant common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vzAny/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with vzAny
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Networking
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/route-leaking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Route Leaking
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Random stuff
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Random stuff
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../random-stuff/html-colour-codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML Colour Codes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../random-stuff/mkdocs-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing mkdocs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="access-policy-configuration">Access Policy Configuration<a class="headerlink" href="#access-policy-configuration" title="Permanent link"></a></h1>
<p>Configuring interfaces on an ACI fabric can be very simple (if you know what you're doing), or a bit like driving a car, it can be challenging if you've never been taught properly. I've see many, many customers who have started off configuring things without a real plan in mind, and therein lies one of the most important things to remember when configuring ACI, and that is "plan first, configure second".</p>
<p>Configuring an interface on an ACI Leaf switch is much like configuring an interface on a traditional switch, yes, there are a few other options that you wouldn't find on a traditional switch, and yes, to keep things interesting the developers decided to give objects some funny names, but once you get past that it's really quite simple.</p>
<h2 id="access-policy-building-blocks">Access Policy Building Blocks<a class="headerlink" href="#access-policy-building-blocks" title="Permanent link"></a></h2>
<p>Before we get onto an actual example it's worth first understanding the building blocks that are ACI Access Policies - be prepared, there are quite a lot of them!</p>
<p>Ok, the first thing to do is to navigate to <span style="color:green">"Fabric &gt; Access Policies"</span>, under the Access Policies you'll find a list of folders where you'll configure your parameters, and at the very top there is a Wizard that's been designed to help you through the configuration steps. </p>
<p>I would strongly recommend that you never, ever, (ever) use the wizard...!! There a couple of reasons why I would say not to use the wizard, the first being if you use the wizard you will never really learn how to configure interfaces, and the second being that the wizard automatically creates all manner of weird names under the Access Policies.</p>
<p>So what are all these policies?</p>
<p>I'll start at the top and work down, I won't cover every policy else you'll be here forever. If your head starts hurting simply jump to the diagram and example below: </p>
<ul>
<li><strong>Switches &gt; Leaf Switches &gt; Profiles</strong>: These profiles identify one or more physical switches. In our example a Leaf Switch Profile will map to a single switch</li>
<li><strong>Interfaces &gt; Leaf Interfaces &gt; Profiles</strong>: These are the logical representation of physical switches. In our example a Leaf Interface Profile will map 1:1 to a Leaf Switch Profile</li>
<li><strong>Interfaces &gt; Leaf Interfaces &gt; Profiles &gt; Access Port Selector</strong>: These are the actual interfaces on a given switch</li>
<li><strong>Interfaces &gt; Leaf Interfaces &gt; Policy Groups</strong>: These are a group of settings (an interface template) that will be applied to switch interfaces</li>
<li><strong>Policies &gt; Interfaces</strong>: These are the actual interface settings which are aggregated into an Interface Policy Group</li>
<li><strong>Policies &gt; Global &gt; AAEP</strong>: In a traditional switch this would be akin to "switchport trunk allowed VLAN" - VLANs are mapped to a Policy Group</li>
<li><strong>Domains (L2, L3, Physical, VMM)</strong>: Domains define an environment where VLANs can be consumed. Think, these VLANs can only be used by this tenat</li>
<li><strong>Pools &gt; VLAN Pool</strong>: These are lists of one or more VLANs which can be allocated statically or dynamically</li>
</ul>
<p>Ok, if that's the theory, this is how our Access Policies desing would hang together if I were attaching some ESX hosts to my fabric using standard (non VPC interfaces):</p>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/1.png" width="800" ></a>
</div>

<h2 id="lets-build-this-out-step-by-step">Let's build this out step by step...!<a class="headerlink" href="#lets-build-this-out-step-by-step" title="Permanent link"></a></h2>
<p>The best starting point (IMHO) is to always focus on the Policy Group / Interface Template (call it what you want - well, it's called a Policy Group), because this will be a template which you'll reuse multiple times to ensure that all the switch interfaces are configured in a consistent manner.</p>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/2.png" width="800" ></a>
</div>

<p>To create an Interface Policy Group, navigate to <span style="color:green">Interfaces &gt; Leaf Interfaces &gt; Policy Groups</span>. Once you're in the right place, create a new Policy Group with the name of the device that you're attaching to the network - in this case we're going to attach the default vSwitch-0 from our hosts, therefore we'll name the Policy Group "<strong>esx-hosts-vSwitch-0</strong>".</p>
<p>When you create the Policy Group you'll quickly realise that you should have created some of the other objects before the Policy Group so that you could use them at this point. Not to worry, you can either create the objects at this point, or just save the empty policy group - we'll do the latter and just save the empty group.</p>
<h2 id="lets-start-again-at-the-bottom-and-work-our-way-up-the-object-model">Let's start (again) at the bottom and work our way up the Object Model...!<a class="headerlink" href="#lets-start-again-at-the-bottom-and-work-our-way-up-the-object-model" title="Permanent link"></a></h2>
<p>We're going to keep our naming structure very (er) structured, everything will reflect the name of the Policy Group.</p>
<p>We will create the following objects:</p>
<ul>
<li>A <span style="color:green">VLAN Pool</span> that is type "static" with the VLANs that we want to use for our host connectivity on vSwitch-0</li>
<li>A <span style="color:green">Physical Domain</span> that could/would be used to control where the VLANs are used</li>
<li>An <span style="color:green">AAEP</span> that is going to "switchport trunk" allow the VLANs on an interface</li>
<li>A number of <span style="color:green">Interface Policies</span> which will define the characteristics of our interfaces e.g. cdp-enabled, mcp-enabled, port-local-vlans etc</li>
</ul>
<p>At each step we need to ensure that the relationship between our objects is in place, because if you have a break in the model the interface won't be configured correctly.</p>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/3.png" width="800" ></a>
</div>

<h2 id="now-lets-start-at-the-top-and-work-our-way-down-the-object-model">Now let's start at the top and work our way down the Object Model...!<a class="headerlink" href="#now-lets-start-at-the-top-and-work-our-way-down-the-object-model" title="Permanent link"></a></h2>
<p>The next step will be to map our physical switches to the logical representation of our switches, in other words we will create a 1:1 mapping between our <span style="color:green">Leaf Switch Profile</span> and our <span style="color:green">Leaf Interface Profile</span>.</p>
<p>To do this we will need to create the following objects:</p>
<ul>
<li>A <span style="color:green">Leaf Switch Profile</span> this identifies a physical switch, i.e. leaf-101, leaf-102, etc</li>
<li>A <span style="color:green">Leaf Interface Profile</span> this will map our configured interfaces to our physical switches, i.e. leaf-101, leaf-102, etc</li>
</ul>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/4.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/4.png" width="800" ></a>
</div>

<h2 id="lets-complete-the-object-model">Let's complete the Object Model...!<a class="headerlink" href="#lets-complete-the-object-model" title="Permanent link"></a></h2>
<p>The final thing we need to do is to select which interfaces we want to configure on a particular switch, to do this we will create the two remaining objects:</p>
<ul>
<li>An <span style="color:green">Access Port Selector</span> is configured under the Leaf Interface Profile and is used to identify on or more interfaces that will be configured</li>
<li>A <span style="color:green">Port Block</span> is where you actually specify the interfaces that you want to configure i.e. eth1/1, eth 1/2, etc. You can add a unique interface description to each interface as you configure it, this will be displayed when you enter a "show" command on APIC such as <code>fabric 101 show interface status</code>, or directly on a leaf switch <code>show interface status</code></li>
</ul>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/5.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/5.png" width="800" ></a>
</div>

<h2 id="that-seems-like-a-lot-of-steps-to-configure-an-interface">That seems like a lot of steps to configure an interface...!<a class="headerlink" href="#that-seems-like-a-lot-of-steps-to-configure-an-interface" title="Permanent link"></a></h2>
<p>This is something that I've heard more than once, and it's true, there are a number of steps that need to be completed, and if we were only configuring a single interface on a single switch this would take some time. However, Data Centers come in all shapes and sizes, and there are always multiple switches - from a small Data Center of 10-20 switches, to a large Data Center with hundreds of switches. Whatever size Data Center you're building, the ability to have a consistent configuration across all your switches is critical.</p>
<p>Once we've build out our Object Model for our vSwitch-0 configuration on our ESX hosts we can reuse the <span style="color:green">Policy Group</span> across as many switches as there are in our Data Center, it's simply a case of creating an <span style="color:green">Access Port Selector</span> with the required interfaces under the <span style="color:green">Leaf Interface Profile</span> wherever you're attaching your hosts.</p>
<div class="row" style="display: table;margin: 0 auto">
    <a class="glightbox" href="./images/6.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="./images/6.png" width="800" ></a>
</div>

<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link"></a></h2>
<p>Configuring interfaces on an ACI fabric is extremely flexible and scalable however (as hard as it is) you should really plan what you're going build before jumping in at the deep end and configuring things.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["search.highlight", "toc.integrate", "content.tooltips", "content.code.copy", "content.code.annotate", "navigation.sections", "navigation.tabs", "search.share"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>